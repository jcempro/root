function formatarFrequencia(r){return"number"!=typeof r||isNaN(r)?"0.00000":r.toFixed(5)}function processarTimeSlot(r){if(r.timeslot&&Array.isArray(r.timeslot))return r.timeslot;if(r.ts_linked){if("string"==typeof r.ts_linked)return r.ts_linked.includes("2")?[1,2]:[1];if(Array.isArray(r.ts_linked))return r.ts_linked}return[1]}function determinarValorAD(r){if(!Array.isArray(AD_CONFIG)||AD_CONFIG.length<2)return AD_CONFIG[0]||"A";const o=r.timeslot&&Array.isArray(r.timeslot)&&r.timeslot.length>0,e=void 0!==r.color&&null!==r.color&&0!==r.color&&"0"!==r.color;return o&&e?AD_CONFIG[1]:AD_CONFIG[0]}function criarChAlias(r,o){if(!Array.isArray(r)||r.length<2)return"Unknown";const[e,n,t]=r,i={UF:e||"XX",CITY:n||"Unknown",COUNT:void 0!==t?t:"",AD:o||AD_CONFIG[0]};let a=CH_ALIAS_TEMPLATE;return a=a.replace(/\{\{\$([A-Z_]+)\}\}/g,(r,o)=>void 0!==i[o]?i[o]:r),a=a.replace(/\{\{\s*\[\s*([^}]+)\s*\]\s*\}\}/g,(r,o)=>/\{\{\$([A-Z_]+)\}\}/.test(o)&&o.match(/\{\{\$([A-Z_]+)\}\}/g).some(r=>{const o=r.replace(/\{\{\$([A-Z_]+)\}\}/,"$1");return""===i[o]})?"":o),a=a.replace(/\s+/g," ").trim(),a}function converterRegistro(r,o){const e=processarTimeSlot(r),n=e.includes(2),t=determinarValorAD(r);let i=r.location||["XX","Unknown"];2===i.length&&i.push("");const a=criarChAlias(i,t),s=r.rx||0,l=r.tx||0,d=r.offset||l-s;return[o,`${formatarFrequencia(s)}`,`${formatarFrequencia(l)}`,"Digital","RX+TX","High",60,"Add",a,"Channel ID",`${r.info?.dmr_id||r.id||""}`,n?"On":"Off",e[0]||1,`${r.color_code||r.color||"1"}`,"Off","Allow TX","All Call","None","None","None","None","Normal",0,"Allow TX","FM","Off","Off","Wide",`${d.toFixed(5)}`]}function jsonToModel(r){if(!Array.isArray(r))throw new Error("Registros deve ser um array");const o=[MODEL];return r.forEach((r,e)=>{const n=converterRegistro(r,e+1);o.push(n)}),o}function modelToCSV(r){if(!Array.isArray(r)||0===r.length)throw new Error("Dados do modelo devem ser um array nÃ£o vazio");return[r[0],...r.slice(1)].map(r=>r.map(r=>commom._ASPAS(r)).join(",")).join("\n")}function converterParaModelo(r,o=!1){let e;if("string"==typeof r)try{e=JSON.parse(r)}catch(r){throw new Error("Erro ao parsear JSON: "+r.message)}else{if(!Array.isArray(r))throw new Error("Dados devem ser array JSON ou string JSON");e=r}const n=jsonToModel(e);return o?modelToCSV(n):n}const isNODE="undefined"==typeof window,commom=isNODE?require(`../../../../../@assets/js/common${isNODE?".main":""}.cjs`):null,CH_ALIAS_TEMPLATE="{{$AD}}, {{$UF}}/{{$UF}}",AD_CONFIG=["A","D"],MODEL=["CH","RX Freq","TX Freq","CH Mode","RX/TX Limit","TX Power","TOT","Scan Add","CH Alias","ID Type","CH ID","Dual Slot","Time Slot","Color Code","Promiscuous","TX Politely","TX Contacts","RX TG List","DMR Encryption","RX CTC DCS","TX CTC DCS","CTC DCS Type","Mute Code","Busy Lock","Demodulation","Tail Tone","Scrambler","Bandwidth","Offset"];isNODE&&(module.exports={MODEL:MODEL,converterParaModelo:converterParaModelo}),"undefined"!=typeof globalThis&&(globalThis.radioModels={...globalThis.radioModels?globalThis.radioModels:{},rt4d:{model:MODEL,converterParaModelo:converterParaModelo}},"undefined"!=typeof window&&(window.radioModels=globalThis.radioModels));